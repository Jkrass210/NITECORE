import{openDrop}from"./module/openDrop.js";import{activateTab}from"./module/activateTab.js";import{updateContent,openMenuLevel1,openMenuLevel2,handleResize,setupMobileMenu}from"./module/dropDownCatalog.js";import{openMenu}from"./module/openMenu.js";import{testWebP}from"./module/testWebP.js";import{toggleModal}from"./module/toggleModal.js";import{newTabs}from"./module/newTabs.js";import{filtersBtnTabs}from"./module/filtersBtnTabs.js";import{boxProductLine}from"./module/boxProductLine.js";import{initFilterToggle}from"./module/initFilterToggle.js";import{setupFormValidation}from"./module/setupFormValidation.js";import{registration}from"./module/registration.js";if(testWebP(function(e){1==e?(document.querySelector("body").classList.add("webp"),console.log("выполнился webp")):document.querySelector("body").classList.add("no-webp")}),document.querySelectorAll(".drop-down-btn")){document.querySelectorAll(".drop-down-btn").forEach(e=>{e.addEventListener("click",()=>{openDrop(e,".drop-down-item")})})}if(document.querySelector("#swiper-1")&&document.querySelector("#swiper-1 > .swiper-wrapper")&&document.querySelectorAll("#swiper-1 > .swiper-slide")){new Swiper("#swiper-1",{slidesPerView:2,spaceBetween:20,freeMode:!1,breakpoints:{570:{slidesPerView:3,spaceBetween:20},1090:{slidesPerView:4,spaceBetween:20}},navigation:{prevEl:".main-sec5__button-next",nextEl:".main-sec5__button-prev"}})}if(document.querySelector("#swiper-2")&&document.querySelector("#swiper-2 > .swiper-wrapper")&&document.querySelectorAll("#swiper-2 > .swiper-slide")){new Swiper("#swiper-2",{slidesPerView:2,spaceBetween:20,freeMode:!1,breakpoints:{570:{slidesPerView:3,spaceBetween:20},1090:{slidesPerView:4,spaceBetween:20}},navigation:{prevEl:".main-sec4__button-next",nextEl:".main-sec4__button-prev"}})}function initCard3Swipers(){document.querySelectorAll(".card3__swiper").forEach(e=>{if(!e.classList.contains("swiper-initialized")){new Swiper(e,{slidesPerView:1,spaceBetween:10,pagination:{el:".card3__swiper-pagination",clickable:!0},allowTouchMove:!1,simulateTouch:!1,nested:!0});e.classList.add("swiper-initialized")}})}const observer=new MutationObserver(()=>{initCard3Swipers()});if(observer.observe(document.body,{childList:!0,subtree:!0}),initCard3Swipers(),document.querySelector("#swiper-3")&&document.querySelector("#swiper-3 > .swiper-wrapper")&&document.querySelectorAll("#swiper-3 > .swiper-slide")){new Swiper("#swiper-3",{slidesPerView:1,spaceBetween:20,freeMode:!1,breakpoints:{650:{slidesPerView:2,spaceBetween:20},980:{slidesPerView:3,spaceBetween:20},1380:{slidesPerView:4,spaceBetween:20}},navigation:{prevEl:".main-sec3__button-next",nextEl:".main-sec3__button-prev"}})}function initDesktopSwipers(){if("undefined"==typeof Swiper)return;const e=document.querySelector("#swiper-4"),t=document.querySelector("#swiper-8"),o=document.querySelector(".main-sec1__swiper-pagination");if(!e||!t||!o)return void console.log("Required elements not found:",{swiper4:!!e,swiper8:!!t,pagination:!!o});let r,i=null,n=null;function s(){console.log("Init swipers, window width:",window.innerWidth),window.innerWidth>669?(i||(console.log("Initializing swiper4"),i=new Swiper("#swiper-4",{slidesPerView:1,spaceBetween:0,freeMode:!1,reverseDirection:!0,on:{init:function(){this.slides[this.activeIndex].classList.add("swiper-slide-in"),console.log("Swiper4 initialized")},slideChangeTransitionStart:function(){this.slides.forEach(e=>e.classList.remove("swiper-slide-in"))},slideChangeTransitionEnd:function(){this.slides[this.activeIndex].classList.add("swiper-slide-in")}}})),n||(console.log("Initializing swiper8"),n=new Swiper("#swiper-8",{slidesPerView:1,spaceBetween:0,freeMode:!1,pagination:{el:".main-sec1__swiper-pagination",clickable:!0},autoplay:{delay:7e3,disableOnInteraction:!1},on:{init:function(){this.slides[this.activeIndex].classList.add("swiper-slide-in"),console.log("Swiper8 initialized")},slideChangeTransitionStart:function(){this.slides.forEach(e=>e.classList.remove("swiper-slide-in"))},slideChangeTransitionEnd:function(){this.slides[this.activeIndex].classList.add("swiper-slide-in")}}})),i&&n&&(console.log("Linking swipers"),i.controller.control=n,n.controller.control=i)):(console.log("Destroying swipers (mobile view)"),i&&(i.destroy(),i=null),n&&(n.destroy(),n=null))}s(),window.addEventListener("resize",function(){clearTimeout(r),r=setTimeout(s,100)})}function checkDocumentReady(){"complete"===document.readyState||"interactive"===document.readyState?initDesktopSwipers():document.addEventListener("DOMContentLoaded",initDesktopSwipers)}function initSwiper5(){if(document.querySelector("#swiper-5")&&document.querySelector("#swiper-5 > .swiper-wrapper")&&document.querySelectorAll("#swiper-5 > .swiper-slide")&&document.querySelector("#swiper-6")&&document.querySelector("#swiper-6 > .swiper-wrapper")&&document.querySelectorAll("#swiper-6 > .swiper-slide")){const e=new Swiper("#swiper-6",{spaceBetween:10,slidesPerView:2,freeMode:!1,breakpoints:{365:{slidesPerView:3},450:{slidesPerView:4},520:{slidesPerView:5},1030:{slidesPerView:4},1435:{slidesPerView:5}}});new Swiper("#swiper-5",{spaceBetween:10,navigation:{nextEl:".product-card-sec1__button-next",prevEl:".product-card-sec1__button-prev"},thumbs:{swiper:e}})}}if(checkDocumentReady(),document.querySelector(".product-card-sec1__info")){document.querySelector(".product-card-sec1__info").querySelectorAll(".btn6").forEach(e=>{e.addEventListener("click",()=>{activateTab(e.id,"btn6","product-card-sec1__info")})})}if(document.querySelector(".drop-down-catalog")){const e=document.querySelector(".drop-down-catalog");window.innerWidth>950?openMenuLevel1({boxCatalog:e,classBtns:"a.drop-down-catalog__btn",classBox:".drop-down-catalog__content-wrapp",targetSelector:".drop-down-catalog__main-content"}):window.innerWidth<=950&&setupMobileMenu(),window.addEventListener("resize",handleResize),handleResize()}if(document.querySelector("#dropCatalog")&&document.querySelector('[data-window-id="dropCatalog"]')&&openMenu("dropCatalog"),document.querySelector("#burgerMenu")&&document.querySelector('[data-window-id="burgerMenu"]')&&openMenu("burgerMenu",!0),document.querySelector("#swiper-7")&&document.querySelector("#swiper-7 > .swiper-wrapper")&&document.querySelectorAll("#swiper-7 > .swiper-slide")){let e;function initSwiper(){e=new Swiper("#swiper-7",{slidesPerView:1,spaceBetween:20,breakpoints:{640:{slidesPerView:2,spaceBetween:20},768:{slidesPerView:3,spaceBetween:20}}})}function destroySwiper(){e&&(e.destroy(!0,!0),e=null)}function handleResize(){window.innerWidth<1030&&!e?initSwiper():window.innerWidth>=1030&&e&&destroySwiper()}handleResize(),window.addEventListener("resize",handleResize)}function initializeSwiperSwitcher({buttonListSelector:e,swiperContainerId:t,newBlockSelector:o}){const r=document.querySelector(e),i=document.getElementById(t),n=document.querySelector(o),s=e=>{console.log("Индекс для обновления Swiper:",e);const t=n.querySelectorAll(".swiper-wrapper-6");console.log("Все списки ul:",t);const o=t[e];if(o){i.innerHTML="";const t=o.cloneNode(!0);i.appendChild(t),initSwiper5(),console.log(`Список с индексом ${e} вставлен.`)}else console.error(`Список с индексом ${e} не найден.`)};r.addEventListener("click",e=>{console.log("Клик по кнопке");const t=e.target.closest(".product-card-sec1__btn-fasteners");if(!t)return;refreshFsLightbox();const o=t.closest("li"),i=Array.from(r.children).indexOf(o);console.log("Индекс выбранного элемента:",i),r.querySelectorAll("li").forEach(e=>e.classList.remove("selected")),o.classList.add("selected"),s(i)});const c=Array.from(r.children).findIndex(e=>e.classList.contains("selected"));-1!==c?(console.log("При загрузке найден элемент с индексом:",c),s(c)):console.warn("Нет элемента с классом selected при загрузке.")}if(!document.querySelector(".new_block")&&document.querySelector("#swiper-6")?initSwiper5():document.querySelector(".new_block")&&document.querySelector("#swiper-6")&&document.addEventListener("DOMContentLoaded",()=>{document.querySelector(".product-card-sec1__equipment-list-1")&&document.querySelector("#swiper-6")&&document.querySelector(".new_block")&&initializeSwiperSwitcher({buttonListSelector:".product-card-sec1__equipment-list-1",swiperContainerId:"swiper-6",newBlockSelector:".new_block"})}),document.getElementById("theme-toggle")){const e=document.getElementById("theme-toggle"),t=document.documentElement;e.checked=t.classList.contains("light"),e.addEventListener("change",()=>{e.checked?(t.className="light",localStorage.setItem("theme","light")):(t.className="dark",localStorage.setItem("theme","dark"))})}if(document.querySelector("box-cheap__btn")&&document.querySelector(".modal_del_card")&&toggleModal("a.btn5",".modal_del_card",".modal_del_close",".modal_del"),document.querySelector(".box-cheap__btn")&&document.querySelector(".box-cheap-modal")&&toggleModal(".box-cheap__btn",".box-cheap-modal",".modal_del_close",".modal-product-order__window"),document.querySelector("a.btn-track-order")&&document.querySelector(".modal_del_head_top")&&toggleModal("a.btn-track-order",".modal_del_head_top",".modal_del_close",".modal_del_head"),document.querySelector(".product-card-sec1__box-left")&&document.querySelector(".product-card-sec1__hidden-swiper-mobil")&&document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".product-card-sec1__box-left-wrapp"),t=document.querySelector(".product-card-sec1__hidden-swiper-mobil"),o=e.parentElement,r=()=>{window.innerWidth<1030?t.contains(e)||t.appendChild(e):o.contains(e)||o.appendChild(e)};window.addEventListener("resize",r),r()}),document.querySelectorAll(".product-card-sec1__item-tab .btn6")&&document.querySelectorAll(".product-card-sec1__box-content")&&document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelectorAll(".product-card-sec1__item-tab .btn6"),t=document.querySelectorAll(".product-card-sec1__box-content");!Array.from(e).find(e=>e.classList.contains("active"))&&e.length>0&&e[0].classList.add("active"),!Array.from(t).find(e=>e.classList.contains("active"))&&t.length>0&&t[0].classList.add("active")}),document.getElementById("btnScroll")&&document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("btnScroll");e.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})}),window.addEventListener("scroll",()=>{window.scrollY>document.documentElement.scrollHeight/4?e.classList.add("active"):e.classList.remove("active")})}),document.querySelector(".box-double-catalog")&&newTabs(),document.querySelectorAll(".filters-btn-tabs")&&filtersBtnTabs(),setTimeout(refreshFsLightbox,2e3),document.querySelector(".product-card-sec1__box-right")&&document.querySelector(".box-product-line")&&boxProductLine(),document.querySelector("#swiper-20")&&document.querySelector("#swiper-21")){const e=new Swiper("#swiper-21",{spaceBetween:5,slidesPerView:4,freeMode:!0,watchSlidesProgress:!0,breakpoints:{1030:{spaceBetween:10,slidesPerView:5}}});new Swiper("#swiper-20",{spaceBetween:4,breakpoints:{1030:{spaceBetween:10}},thumbs:{swiper:e}})}if(document.querySelector("#openFilter")&&initFilterToggle("openFilter","data-filter-for"),document.querySelector("#openFilter1")&&initFilterToggle("openFilter1","data-filter-for-1"),document.querySelectorAll(".box-form-1__form")&&document.querySelectorAll(".box-form-1__form").forEach(e=>{setupFormValidation(e,".box-form-1__submit")}),document.querySelector(".partners-sec2__swiper")){const e=document.querySelector(".partners-sec2__swiper"),t=e.querySelector(".swiper-wrapper"),o=t.querySelectorAll(".swiper-slide"),r=new Swiper(".partners-sec2__swiper",{slidesPerView:1,spaceBetween:7,speed:1e3,freeMode:{enabled:!0,momentum:!0},autoplay:{delay:2e3,disableOnInteraction:!1,waitForTransition:!0},breakpoints:{580:{slidesPerView:2,spaceBetween:10},850:{slidesPerView:4,spaceBetween:15},1030:{slidesPerView:5,spaceBetween:27}},navigation:{nextEl:".partners-sec2__btn-prev",prevEl:".partners-sec2__btn-next"},on:{reachEnd:()=>{o.forEach(e=>{const o=e.cloneNode(!0);t.appendChild(o)}),r.update()}}});e.addEventListener("mouseenter",()=>r.autoplay.stop()),e.addEventListener("mouseleave",()=>r.autoplay.start())}function initMobileSwiper(){if(!document.querySelector(".mobile-swiper-hero"))return;let e=null;function t(){window.innerWidth<=669&&!e?e=new Swiper(".mobile-swiper-hero",{slidesPerView:1,spaceBetween:0,pagination:{el:".mobile-swiper-hero__swiper-pagination",clickable:!0},loop:!0,autoplay:{delay:7e3,disableOnInteraction:!1}}):window.innerWidth>669&&e&&(e.destroy(),e=null)}t(),window.addEventListener("resize",t)}document.addEventListener("DOMContentLoaded",initMobileSwiper),"complete"===document.readyState?initMobileSwiper():document.addEventListener("DOMContentLoaded",initMobileSwiper),document.querySelector(".registration")&&registration();